<!DOCTYPE html>
<html data-html-server-rendered="true" lang="zh-Hans" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22zh-Hans%22%7D%7D">
  <head>
    <title>Mark 并调试 HEU 自动打卡代码 - Monstx&#x27;s Blog</title><meta name="gridsome:hash" content="cb52aa4f608860a6bab619b2e7904eb19d960a1e"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.20"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="theme-color" content="#fafafa"><meta data-vue-tag="ssr" name="apple-mobile-web-app-capable" content="yes"><meta data-vue-tag="ssr" name="apple-mobile-web-app-status-bar-style" content="default"><meta data-vue-tag="ssr" name="apple-mobile-web-app-title" content="Monstx&#x27;s Blog"><meta data-vue-tag="ssr" name="application-name" content="Monstx&#x27;s Blog"><meta data-vue-tag="ssr" name="msapplication-TileColor" content="#fafafa"><meta data-vue-tag="ssr" name="msapplication-TileImage" content="/assets/static/favicon.png-144x144.png"><meta data-vue-tag="ssr" name="description" content="找资料逛博客的时候碰巧进入了一个学长的博客，发现了懒人福音的自动打卡 Python 脚本。本文记录 Python 萌新的调试过程（造轮子不行，用轮子一流.."><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.31c137b0500c19ff7232c36417527311.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.31c137b0500c19ff7232c36417527311.png"><link data-vue-tag="ssr" rel="manifest" href="/manifest.json"><link data-vue-tag="ssr" rel="icon" type="image/svg+xml" href="./src/assets/images/favicon.svg"><link data-vue-tag="ssr" rel="alternate icon" href="favicon.ico"><link data-vue-tag="ssr" rel="mask-icon" href="./src/assets/images/favicon.svg" color="#fafafa"><link rel="preload" href="/assets/css/0.styles.4ddb5c72.css" as="style"><link rel="preload" href="/assets/js/app.c7c471b6.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--blog-post-vue.eca4166c.js" as="script"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.9aadb5a5.js"><link rel="prefetch" href="/assets/js/page--src--pages--about-vue.9bab4f0d.js"><link rel="prefetch" href="/assets/js/page--src--pages--archives-vue.ca245161.js"><link rel="prefetch" href="/assets/js/page--src--pages--friends-vue.d5d31487.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.13f2e0dc.js"><link rel="prefetch" href="/assets/js/page--src--pages--watch-vue.55772fe7.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.ed750bd1.js"><link rel="prefetch" href="/assets/js/vendors~page--src--pages--about-vue~page--src--pages--watch-vue~page--src--templates--blog-post-vue.46e4b402.js"><link rel="stylesheet" href="/assets/css/0.styles.4ddb5c72.css"><script data-vue-tag="ssr" async defer data-website-id="65fec8e8-f05c-48ee-8d37-9177594c4282" src="https://analytics.monsterx.cn/umami.js"></script><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      ;(function() {
        window.__onThemeChange = function() {}
        function setTheme(newTheme) {
          window.__theme = newTheme
          preferredTheme = newTheme
          document.body.setAttribute('data-theme', newTheme)
          window.__onThemeChange(newTheme)
        }

        var preferredTheme
        try {
          preferredTheme = localStorage.getItem('theme')
        } catch (err) {}

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme)
          try {
            localStorage.setItem('theme', newTheme)
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        })

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
      })()
    </script>

    <div id="app" data-server-rendered="true"><div id="nprogress-container"><header class="header"><div class="header__left"><div><a href="/" class="logo active"><span class="logo__text">
      ⟁   Monstx's Blog
    </span></a></div></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header></div><main class="main"><div><div class="post-title"><h1 class="post-title__text">
      Mark 并调试 HEU 自动打卡代码
      <!----></h1><div class="post-meta">
  April 5, 2020 ·
  
    3495 words ·
    <strong> 16 min read</strong></div></div><div class="post content-box"><div class="post__header"><img alt="Cover image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1280 400' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e9f822d21a3f4fb948604bebd5e5f005'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e9f822d21a3f4fb948604bebd5e5f005)' width='1280' height='400' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAUCAIAAACyFKxoAAAACXBIWXMAAAsSAAALEgHS3X78AAAJOElEQVRIx21XWW8b1xXmD0lbicNluO8iKVLiNpzh7Jwhh8NNi2VqsyxZuy1brpfYlpLa9ZI6dpM0St04TaIoCWKrSWqgqJHABtrYTVsUbZ8KJH1o6vil7Q/ombnkiLYDXAwOee%2bc%2bc4531muCXNQsCzOgsPHdcm81VXAnCBT2v/OQq%2bdhJ/uAI97GLND%2b2l103DG6qLhPLxlximbm7G5aaQEZNzLdmQa97aVw3kkg2ZdZo2PwivoAPoJT7uHRQIsgIG2kGx8yGS8r%2bsqoEPGE/4HZLiX7usvclxVKTdKcoPlquGoAAd6bKSui0FK7B4GPmkARTIYCUqQKvRVENDnQHMHEL8H1M93A9VlbQvOG84CPZoSXbMJ7ekb5NOG%2bnlwdrCPK8nVqtqoq82a2lTK1UpZrapNhlFiCcHhZRAg4y1ArIMjkRlOP2%2bYhGTkewDdbQwyz9DThtiOA9MJMgnRM3wPb8Ey6aBZjTAOZBxjOAz30OEYVypVVaVWLlXLJRWeJVmFBUJNrecIudfeJgwC1E0SZIyuEIXUAMcYJLFo5MwjcLBrxARMNQLbDRqiqmOjDK8hChW%2bi2SML8RwXFmWFKlYKYplgZOkogLoZVhFBf4XRcXlA3x7Gg0KWbQ4dJJK872gsRE%2b5CyADB/SkspBpclRVpzKM%2bMUP1HgJ4KxMliiIdPNQ1iNpNKVkx1/tZWbEEe7SdYha8EfolmmKPAyLJoWSJIFG0ShBIvjJJ6XZakcT4o29x7vjTh0kkojjMWetTnzmD1rdRAYTlgd%2bV5r1hUArTNldY4Rp7LkEMm0iuVZWZ0lmJZVR2nG87iPt3t5DNgIkCCp2goLemBpFNjuHEAkY2EPuSGRJJkCT5Ecy4g0xazPHzizOCHyRbogqFKJoXmOFbNE8akERYHWZC2wJB4oYuRxc/8kFttvJ1atfcPmYM0arrPDzxcXbmQr6%2bmxl9O1s5nRy%2bTszTBxgBm/3EfN9iZmrMlpjDiGZdcsyRlbfs0crGrGuxjcx3UnVdsAg3AgtOPgogOhDElQilTK5uifnFn739/u/PXXb8y1RlJp%2bvqZlWFFJkkukxUQfUEXCrdFIwmqKgUMz9vDFYzdwLgfmdWfY%2bJFTN3qEa%2bERl4nxy4lx7eofReCynk7fdouvOjf91a%2bup6rnVJa59ziprVwEiucxphNa3rRVryIBVWLbgCqrR2mMCajfoELYQ/QoIqOewWrc3BiSP3y1vWGWv3xidXPt69%2bfX976/wPi4L874e3NlZnMlk6n29HoKt6UEaV0JQ7aSCPPToEXsdcLOYtOiIqWzoUTQ0R4lwstz%2bYbNClBYKdcidGUlSr3FyRq/MDhaket2j1l2x9Q5hHxMINi78MRcXc1anaOQBFqqvdsEZpg/9dvkyRF/7%2byavXNo9f3zz%2b1f33vnl4%2b%2b72te2fvvjowYfnT6yAAam04A0JhhdQghrVoy07KbsLGJWH1LQ4SLubrg0tFZVZSZnhpalqc2lpZXN%2b6RzIsjrHFqcbo6usOPk9cwZOOr2MlgPge9RSOwYg2FoOoFQwzNATEZ0jzXbCbA0fX5j86t7OF7tbQKHHf/rVvx7eevzH3TtvXqpXqgTBuwO0xYiAkzI7nqjcbTOg/thBWx4AAQ6woVJfqNTm4SlVZgX5wPDYWnN0mZOmy9V5SZkbGTsMpen7WAYw6DGkjEqDFKL2iqqt6YnK3dXewQyKa01NLy4tr23fvPH7OzuP/nDr0Ze3v3l46z9/%2bfgXV84GwmQswds97eINueXw0IFg4dnKjfsFZ7iMByRPrO7uq7r6VL6yINTXxPqRJLEvSU2W64tS80g0O0aJM5lCi5QXs8yEO1aHk3Z/0e4TvDHI4DzWrpac0eMgJUzGl/TCx6GpBswQpKGpmcXRiTlWbg5PLt77ZOfxgw%2b/vr/z7cOP/vvn22PN1nOWrDvIId%2bDj3vwAjHIVmihF6c6DR9GIwYc7x8cG1RODpaO9RfX0tUzcX45X1pqLr9WmdwsT54vz13Pq8fokXOUerQ2taHsPzO08npSPjogr8e4ZXe0BqUp09hwBEsQQMsz/DR1t/pOHLTy5/EnfJHBaIoJxHLTc6t3t6//8/Ob337x/j/u3jy1vNqLa0FEvtc6oM6NMkkLObbX0RmNtNbD9dpy3sQwMXohQs700YeSpXUABH5VZ6/w6jLfONo4fIOvHZH2nWbr68XRU8PLr8qTF%2bLiWpicCeWmPRElMLgvxq9aPRyut2EjsKghmIyURRuY1goYX7wZjJe8wf5gdDAYzx04dPiDl09/9trRt186OToyHklIKUIdzCqGpyECQoYa4ahGgRqIUUZb0Pzipl0h2R2t%2b1P7cZ/gDsnOSKXHmnVHymL5oFxfATMEdUlUDgnVZbm2mCLHHCEFmAasg5M2DwfQ7eBZvTV1T25oNDIZVcmi93xvtB4aHIvnD/ZT833pMW8o7fRGhvYffPfyiTePD3t8EXcg3j%2bQSedIilGhB4ObgTMeL1mlciqZq8Mzn4UJ74mZGaoz1AMbAZ%2bAhgpsRtSCA30JpcC10vnhXGEsS44EoqUeWw56MOw6NKAUAto986KJwehaJmN8gL7jjTXC6YlwajyUaoVTrUh6KpxuOXypgli9cGz%2b7DifSiatzgCGe%2bKJtC8M9wStfAH74xFCzaVKmZSSS0nplM2lzVddo1FB73SCkWydTkfBJIeQgfADK2HzMF3jzN5YuRfqPQoBPxngsJYD%2bhhI4j7JGxvyRJvw9KEVH4bljlSSWfHqqYVXDpdvXz0aCEVd3mA0KVjdWusF6gPpE305aTAmDCSkdJJJDlidT1Xk9oxt3DTad5fO/IyuTU81EJRjhu91hFx310LeaVchrYsFSvaggsMKVfCQ6gipzrDqCNecweLsSOql5w99en3%2bd2%2bdfePapc2NF5ojS8HEcK9LfA7LAbJAWKAGiFIuxQ/EiWh/Z37WJzknZVy7UMbD9No1Mz/T9cC7XWMl6gBP3jf2ulb7QoPuRFaPYHELFnh6RIu3aIXlk2x%2bqQfPk3l%2b%2buDyyuLqvbcvPvjtx7vvv/PZpx/t7rz7wsbFc6c3f7n1s92dd36z%2b8F7W9f4gX4iEnJ5SGdANCb%2b7gvXdxLD2LVrFGpfUMHBXXc91pgdwObuwP4fenLbqpcgDcYAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="1280" data-src="/assets/static/auto-checkin-covid19.a209973.c87091a851f8ca767e5cbc6ea41ac4d9.png" data-srcset="/assets/static/auto-checkin-covid19.a67b0b2.c87091a851f8ca767e5cbc6ea41ac4d9.png 480w, /assets/static/auto-checkin-covid19.a209973.c87091a851f8ca767e5cbc6ea41ac4d9.png 1280w" data-sizes="(max-width: 1280px) 100vw, 1280px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/auto-checkin-covid19.a209973.c87091a851f8ca767e5cbc6ea41ac4d9.png" class="g-image g-image--loaded" width="1280" alt="Cover image"></noscript></div><!----><div class="post__content"><p>最近这几天又不知道干点啥，天天上课累死了，前面的还没掌握就又要接新的知识，真是太难了。心血来潮想好好学一下 JavaScript 什么的前端基础，找资料逛博客的时候碰巧发现了一个学长的博客，看到《<a href="https://zjw1.top/2020/03/10/auto_checkin_during_covid19_and_cas_sso_learning/" target="_blank" rel="nofollow noopener noreferrer">疫情期间自动健康打卡暨 CAS 单点登录认证实践 - SiteForZJW</a>》这篇文章，常年起不来床的我赶紧点开了，啊啊啊我为什么没有早点发现这种好东西啊，生气。</p>
<p>第一次看的时候了解到这个 Python 代码要自己先手动执行一边获取表单数据。Emmm，那是啥，好像不太了解呢，先 Mark 了！</p>
<h2 id="python-和依赖"><a href="#python-%E5%92%8C%E4%BE%9D%E8%B5%96" aria-hidden="true"><span class="icon icon-link"></span></a>Python 和依赖</h2>
<p>什么？你说这个年头还有人电脑上没装 Python？なんと！</p>
<p>Windows 系统直接上 Python 官网下载安装包，注意将 Python 安装目录添加到 PATH 环境变量，一并安装 pip。如果运行时显示缺少模块就 pip 安装一下。</p>
<pre class="language-bash line-numbers"><code class="language-bash">python -m pip <span class="token function">install</span> --upgrade pip
pip <span class="token function">install</span> requests lxml<span class="line-numbers-rows" aria-hidden="true"><span></span><span></span></span></code></pre>
<h2 id="获取-form-data"><a href="#%E8%8E%B7%E5%8F%96-form-data" aria-hidden="true"><span class="icon icon-link"></span></a>获取 form Data</h2>
<p>今天早上起来的出奇的早（7 点半我就醒了），一想到学校的打卡十点前就要完成，我突然想到了那个自动打卡、表单数据的事情。于是我点开了浏览器开始尝试。</p>
<p>打开 <a href="http://one.hrbeu.edu.cn/infoplus/form/JKXXSB/start" target="_blank" rel="nofollow noopener noreferrer">网上办事中心 - 平安行动</a> ，虽然不知道是啥，但 F12 肯定会告诉我的。选择 Network 栏，网页从打开这个菜单后加载的所有请求都会在这里显示，先刷新一遍网页，找了一遍好像什么也没有（一开始我以为表单数据是缓存下来的什么东西），Emmm，提交一遍试试，点完确认提交之后 Network 最下面显示了一个新的名叫 <code>doAction</code> 资源，那一定就是你了！</p>
<p>好的，<code>Form Data</code> Get√ 。选择 <code>view parsed</code> <code>view decoded</code> 就能看到这个表单的所有数据，也就是之前 Python 自动打卡需要自定义的。完整存好 <code>formData</code> <code>boundFields</code> 的内容。</p>
<p><figure><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1901 1000' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-b614ee0887ec85536d75e1e090ff7ac9'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-b614ee0887ec85536d75e1e090ff7ac9)' width='1901' height='1000' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAiCAIAAABgN0jYAAAACXBIWXMAAAsSAAALEgHS3X78AAAK70lEQVRYw6WZSXYbuRmAeZ3cLDfINjlBbpBN1v2y6SyyS%2bclrx2727baMiXKokSyyJrJmlFzVT7gJ8vU1O2n/IYhAIVC/fMAztI0LQ34vp9lGQN6P/DzokjiOAxDzw%2bCIAyDINaQTFDX9TiOQ9/neRZFUdu2evoN0Pf9M6vj2Js2nB1SqKKpmht/ecijNz%2b%2bORgwaMSgXRRFnucz0OUPE3CdVkGIPo5iqGJ3FMX7MBT09f80pVNKVVVVVhU7mUI50/oF4JHK81Lxr5Rdsl%2bfUJZ121a23S1uhtvb%2bu5erxhIUv0VN/KTLFmtVqAnBEgPqnx3VtYNpzR13TYNvW5NAzv5S88mz3N93zsYHkMYp3OoYOC6LociIE40O72nqHNabmDn2ksn8uIi9BzX87ScfR%2bugYTjOOnbd9vF8n65yd7%2b7N7ducHZoySFfRweGibyIYiRp5wwU0mUZekhS/mj%2bzSNTmB4H%2b2BMARFxocTyIZpUTZP68fXzTPZgNzyjx%2b3y9tby1n5iWPvQMi2bVgAKpzufrxY/PDm6l/v/J8/WKsVTPE9nw3b7RaMYRY9jBO5lYaDHHtxcTG7DIrV0mqWy3q1Lpd3uWXlRYlO6VboVohWZfkDMHonQ9n39VFx9mKhzEArW7rZxPt9VhRZ1SqDDQ9gDjRAjGXvoGq7WTuet7PtwNeWxzoSEMZPfAkNMID9PJ397rvgT3/5T7a6/u/i4%2bZuoX58yzfyLDvDU%2bVlmaPrrCszliljVeinelAe14sTVQa5rWUhAmQNAegZK2hOqo0oNaaUwuP1em1ZFtjsD4ftdhcGoTwSUYfafQQiXl6nF8XbG0A/Z398n/7tHxf9zWd/MU%2bv5/Wny7SslBGXbgysrbq6VpeXKgjUxlK3S3XzRc3nyrGVZSnH1Yv3K724WKj9QWWFvAsVYaStUEg6nAEYi%2bWABOjCaTZ0BrA0qIXO1oAsMmVRntKLcI2h1jO81i6q5qvDxsnWTrIKy6Tqy6ZXx9aptFDBQbmBypSKUnVI1D5WXqjXaSzGmV5kj79XRaXqTt4t2z4oWtxibTwVHx4N4B/BBmc6nsC4j3qashOyjWs9AlNx0wLiu2Q86/oeAi638W2Q3Qb5Fy/Lqw4CqnaoWk1J2Y3lMLK9GcZqGItuVL2elt1wbEx7s2cwi00vrWr6MKsH8z0wEPc/0TARcI7oOTxaf2k642%2b0T8LtbrfdblYr%2boyPg6gqq1oPun7oup6Wppn2AW1fN8z51%2btH0psNuumVYwPhSLUTAY9iGWw%2bRbDxPMAJWr0BGeheH/Zgp7yuCWDNjbP1dovFoo7Iumq1rNHi5kysQJamOlwYksZvg6Q8EoDKovdoPJRI6KRnEWeywTvFMe4Sw2WVqeO6bMNSsVd24mpwqffLJSdoH3AG%2bIAZdIRRjmUnOfpcZkWZVl3dDXy57QcGU%2btAfRjzWut30z149Gxjz774KgGw53siCmEwA/DDgrEBesll8P9QB4N5ixW8aRln74Lbv2%2bskWBrLFtCrZg7KjQc9uluvblfrTcby7YdDJeMpNH2ruU2NYIqK6DVQsfZ%2bkuNPfGZCh20l9zCzsnBT%2bEPC2ZqWRvmt24aJqprdfwG/8RkL1GRbbOsa5rqlJhImIcLWoWCVG22W9/zcNtaT4yGwIbqZOkCfAm96l6lQpMEQFSw3%2b12koBABvxmBeXB/185mZ/wXYRTQKqoHBkJR3UnmNwrMtQEeHG%2bsZ2Ntb27X/vhHk8Ciq1p50YpUyy8brX8u99qj4wYAohZ4E3opdea7fvoMevwkpW7uzsyj8%2b7xInyvmuJZuxEDsQ8PEpU6DytfioBiIgOWegFLpINQuIhoV7jqjX%2bSIY0%2bE5T2sP2Xf/g0bONPYeHKiTYIwF6o96BZL5wFHqQD9Z9lMDQaxUyEoBI8LXzpjyp/mQDRgKjNuLtBheqQUut1iEDMs9jh/ZCRMcG7r9ShfAquxNgDKJOnAlhIMQiLgi8iEhuXKAmqBOk8iJpEC79Jqq7dtDR10S9xoCxgXFwD%2blqs1mv6DZkGWXTSvCrH7pR/YH6NQTUJnAKAZIPa4%2bJvybDM9k4qIht4GDndhIkahw6Qo6k0OiYTgqr%2bvvgYl8WPc7nAQHD4McYseP6QZzmeKCs6rSr6Uesuem%2btta40aLWUbbtHjx6trXajTbiD1KTpYOl5JW4FhhPLxKAr%2bBK2o2uz3fpfZDbUSFCk/pLVylt8/Zg40gHbBhFmFQIj4cN7F3P1Rm4Dxm5DlamxsNhnzXjGEcMoNHudeh/q2nrUo3RvVTcJZEIIaM/lgEsQeoNRM0i/rKsmis7uXHT%2bS7Bx7qOg%2bgQka57qzrKa1KtWNVxcazmjirkHdLl3d1yufxyc8MHdBzQbMsfqRAYoAqviMSiQvAbFaKf/KAEMghgyuE6eDXtjYMEirsgPwYyeIovUgWn/RjNf3/z1z98TP88L%2bHQZMSj5R3watQX%2byAgnSeIsigyOsdGdE7cyyuMGGaLBCR5lvobesCPDdi0mMfO8Q5JRoEB2UEQIhnZX9UVuv%2bd9%2bYqpixVVh4Q7U8S2CNinCf5Y6eqNlEtSoQYdL7Qfm1YBS2velX3Tfvg0bONPfv8AQHgKpVAaGpcAAIYwynXALZ969EyzEBKcMxGS94UA5Itjv3ol4fvg/dhlZ1sIMoIY9RF641l2U5hVEi/0Pei99LMQt8YHz%2berb/UgPhMAkms8zY4LeWYVAjihdBVaMK9w/drO1362cIheCnfeCFA9PkYxTDoSucUH%2bJ122kJjPY%2bvb1fWZgRbu76uix0BqHtRqlzfeCgV6cSYOP4e4kAkgVBg9x6MAYtpKGvO6oaI1646bW%2bi0gxAB7JBYTEL4HK3KFUta6ZdD1woJLa7drddvx8OSwWVdX8Ck4mSL/GBnZuKEkENIC0aIUYsSRzWDoEzO104WZXtibAM%2baBiB4RUBsCMIuyk1QiyqsoJdcEdSwhqztKlvL2Xl3dVMFe58akIQ0hsMP/FmVTVhSjenrspbX9o9a0/T5vhlMFSBFSnYCpVJhTaQJOUqyYdH0oGr0ublCQfqZkMzd5s6HvDmVHzmKS%2bFF/m1y6KJOfPux%2b%2blD/89/1/bp%2bf1FfzmtrV3%2b%2bqq9v6l8%2b1x9/qT/N6/l1fXNbf/pcOx5v/Xo9UD0EuSArT3C8vSP8m1u2XntasvdO0p7mZZjhlIu6i4qGAJGUTWparur0l3n0/iK9t0gD4ziPU1276zYNkkKPiypOizivdHx52CIOKTVf9bWUKnAmGPHO5O34IhSJKUq1PYEoGCmSFGLnUDwHysAsSvI4Saoi4itJmodRhhf2oxQ34MRFQswrz0B4pnthnjqulOqlJgm9fEwHLFQ7y1mW257GcFjb5ROZnAvqKcjVC/YzC%2bLG38dj45E/BWn5xc2CrCKS/3y/f7cMg7QypfT4/4DUxOQFO9v59GX9ZaVjkySkJNdIAwuW3G7ylZJiyMXRU97jISHecdzFYjHDPZt5pu%2bsKR2yhAm9ytOSWiKOOUJqP4FpLJfsMpju/aZ70nMwV8JKXxJ7rr3bOvZufwKTouJYbXNR1UyZFJizHzp523idampMiwLfRcnvkf/PzDVeSr4lBX9iIgu8oZiAPeTslFFTKcgjvoqOSg0uK1KjsGe6ypRLhwn0jwlV9Q1yPC%2bovxVmjy4qBJInIJzmkVibCPH4i8H5zx4Gzo%2bShJl%2bupB6ekX19G7r7HePF2gdjnv%2bBzaCWi%2bQr5yGAAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="1901" alt="Network" data-srcset="/assets/static/heu-checkin1.82a2fbd.2e35e2c967dd8ae72bbd6d3ad3bee786.png 480w, /assets/static/heu-checkin1.cbab2cf.2e35e2c967dd8ae72bbd6d3ad3bee786.png 1024w, /assets/static/heu-checkin1.eaff22a.2e35e2c967dd8ae72bbd6d3ad3bee786.png 1901w" data-sizes="(max-width: 1901px) 100vw, 1901px" data-src="/assets/static/heu-checkin1.eaff22a.2e35e2c967dd8ae72bbd6d3ad3bee786.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/heu-checkin1.eaff22a.2e35e2c967dd8ae72bbd6d3ad3bee786.png" width="1901" alt="Network"></noscript><figcaption>Network</figcaption></figure><figure><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1901 1000' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-0de6a417156f0b67252112b29abcd96b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-0de6a417156f0b67252112b29abcd96b)' width='1901' height='1000' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAiCAIAAABgN0jYAAAACXBIWXMAAAsSAAALEgHS3X78AAAM8UlEQVRYw7VYV3fbyBXmr8pz/kZe8ivyZFuyZKqwNzSCdFzkLiWbbPZ4rbU3Ttl4Ja3tldWLxQ4SBNgAkiBBgqLyzQxFU267zjm5uh4PLmaIe%2bf2cTWbzQ6FSqXSarW63S5GOm83TaNarWp6BWO1UjVN0zAMjM0mBtO27eFwOBgM2u12o9Ho9/t4PP0l%2bBVL3oFlWT27d6Kn663G%2bto6vl6v1/EtykPTouACu2wGJhkVFKxrUbY0Ta/Xsa2Bt2ynYZARAJl7vR7EgAB4hOSY9z4BeNO1rG6XrhpRbLZ%2bPA76/dOBw970KbDDVetlo2Vk0hkwBh4gBhsZqy671%2b/Sn8SG8ffYvO84VqdTLpc1TYNIIGJk0uIb%2bOlSqYRvVKpERRADKyk3I2ScYVebQrFcSqkNzbCqmlrWdHxb13VshFJLJRULlHItU9TaVkcrE8ArnIuqlltmixiCpsEuwDq%2bns1m2Vv8gguG0iY2AU6oZZjNMTZbLRCxp1FvGA0YT9MwqBEZbNnIotgugGFc3H7%2bg/S8zPbWlpJKpZVyTjfVUlHTdcgPtqrVGrjRde1tXjvM4bFeyOd1CligKMU2ZOp0ICFYxwRKZCdYq9W2t7ddR4XyUa5YhqT4U9XSp6BYPJ/QOcMRqASL9NUk4NdUtVgs4kv4XjObaVQqZqttdnrtdosZAFjHKpx3oVBQi0qxkFPpFhx2tVKBKvBQr9cMdnJ0xBYYAiaQsFhUXL%2bZuvXbP4QFWZgO%2b/xCTI7HRYBEkYEkibIsJhIiXjHEI3D8OEnEYrpXikscFwuFgqFQ6LvV7%2bCRcCZogoQLsN4m3ONMYZ75PJhXdL2C9wVFgUKgYcNs1qE606w2DOp%2bxH2xAIiVRLxqDc%2bOc%2bb6vf/W7y4HJZHzhQOhaETguRjHx2I8x1GMcZzPx127xl29ygUCnMfDzc1zbjc3M0PoHi/n9xPi4iIhYlkoRLbQvbEYFwxHQ8Hg6uoqnMGsN6iGobo3hfzLamW3qu9W9J1adR/Y6WTtbs62c3Y3a9v5jvnWLm93q/u2umW10x0rY1npdivV7WTZI9Du5rvtddc3X60EIpw7JPqikjcqAqNCnJdkXopTlHkIFAjxvgDP8XwkyocjfCjMB4J8lCMYAzFG6MEQIfICL7LtshCXoVlQ/v79951up2Y3ETB6tlWrHmm6iojSbhtATJrNOhABvNtpkjDebZqFbPXJt9nnz5tPv6vVdaMBJejlsoJlcI16TW82q4iCfeuOa3l5eSEQnfFG5oIxdyDm9kdjgiSIcUGKC6JMJnFZkBNCIililBN8PMGTSZLQJ5ERJbrlHMO8BKmfPXvWd/rtfuf0DDBoNQtFhCTiI2XqRypMCIHJcU4RP3s9B46KmJHbP6zlFMdsOgOSP84uAvLJcHg27P/NtbKy4vcHQ16v1%2bdbXFz0eb1EACnO4SwF/B%2bXpBFGcd4Awpk0Jn4E4yMERPg4bIkI0O8j5dEP900jVyyq8E8qAzErxCJEK8dxWNi1rDZimFavVUyzXKupGmKrdfY%2b0NNwvoYAy55gxOPzxaIRADwPDijLsgBbEIRkMpFIyAyj0Ygo4qzluBwfEz%2bDyYQcE98JkM/nNRL%2bkYeyxRJyS1lRFBARcyAEYi4TAKedzedLBwfFV6/L2zulV68r%2bQJi1sB5D3rw4IH9ZyKALxgOhsI4X5x6DChIOGZIIQKl%2bBglOQEiR99O0j%2bDEZjQuQA06uGwi7VqqqRq4BgRvT0BLHueDgYZpZB9%2biz3/fPc2lp%2b9bvq3r5pWQbNJhOASNppm/dHJuT3eBZgQIvQhA%2b%2bC9YlArACeYw0ohLrEi/SL6D8DgGIB0wAnBiiIbISHLFaOVFVEuIRDTUKbAJ5sAwFVSabRc1wZveGnc7Q6qDeGp6dfc6EfKEoPCAQCHi8nlgsKlFWOBIM%2bUQyObaJcDgMFyB6AGsfM5oEyBOYlOXYRQGIs6oFCMB8gGUlJHpkOigEGkC%2bgwml02lkibNfgAkBvCH4AHTgnV9YROIhIYX6Y0IUExjHKJIRaSouShfoFIm1TXjwuRNLYwGQd6CBUqlQq6XLZVIF4cgHE4A1kAECZDKZLxJgxR8II4kFggQhAAdL4YWV6Zkl9/ztmWu3Z90jvDa3dG3uxoz75oz7HZHirVn33WtzD6dnPyMA04Bpoi7IQYBU6gQZGI6BOgJOzEpGxCJw9T8IEPJ7vcQFFhZCwQB8IMkLd2fdN%2b/effTw4QOGDx7cu0/gHsUHF%2bHhw4e3bt26755PxJnxE0hcNCFoAE6s66pRz4Bb/LESDUDLCwLQCXzgS01oxRMIL0IA6sXhYJAIIIg3pqaPUynotUm7nFFR/7GKH4aLn1pfX7s5fTUpy58RAGWPomTLWiqbQwBFNihCA%2bAVZsNCI%2buKvlQDy16SB/z%2bQDAcQeAmwTse429enc0oikN7AMbipwCfpAKsJy9PydKFyItMjFLiyZMnOAK4rFIstpqNulFAHkASgAmxH%2b%2bfA8sDX6aB5ZWVQCAcIQ4QDASCGDkR1YJ4%2b%2bpsVlHG/H3yZ4bDhtXDZGNj44%2bXp5PxxDikIpRG%2bTjS%2bbePH8M8mAkVChlNPUAFncsSYH3SuJcifdlgAAFgV19kQiEYz/z8vNvt9ngWmQn98fKVVCZD1vSd4eAUreyHeHZ6ihIhp7cg4k/razeuTF0nhvNxE0L5C1%2bFCRlmXtOrhaKSpU7MehTwjbNn5caXmdCfVlYW/UEUQlwshvNH9EfRluCFpVl38s6dew8e3Ll/n%2bESHW/fu7d07/6YeBcO/fDBvYcPkjdu3p2bT37aiVFCIAop%2bYy29UPqx43Uv39Ira2l0um3FBCIyM1BpYKckM5kINOvEWDYpxrw%2bsOwfqRYXkQdKkVRrnHCyqWpG9Mz1y9duX55ahLlS1cSly5QkpcI3p6aWb48TWrYCQy/KyWcXFFHHlBgQj%2buHn/z5PirvxZfrBWKaiEPZ4A/l3K5PLCQL6CRY6r4ZQ0M/kIEgA9ABahHPUCUEsgDOEdRTIridUkaIxIZKHBSTCbpDJPIZZIkfyIK9ZEHarSh0dRG6ofKv76u1naM%2bn61sqNrW/Xabr22V6/u1qo7qrZTUrea7fTAyfd7uYFTGPTzTj9/eqoML2DhbKhb5qORD8yTOsgT9noj12YFjo/LCVgUSgk5CbdMMCQ5DtW0nEDrOCZOonwRLphQv1/RNWSsAjLWxnqnWHDOhk6/h%2b6yUa/1el209QOnB2fYV%2bpHqoER5Roq7narWdHLdbrGtjtA9PTdbsfuWkbX3j84pInMF0B/KHq9yenp6263iE4kfl7gjKqeBGMPxTUt5EaUcRE0WvmpWujpU2cwQDFJ%2bn6EzzdvUFK0WlaP3LhY6G8dZ4BmF9HC7jlvy61MxTout9C%2bgVir1YHw88FwSDLFYABl9h1SdzT7zvHh8SiMimHU%2bhJpYUQJDQGqiQvWLL6bcAJ1lXevJIrx96x/wge4Z8%2bfo5iurW8oGxuF/7xQ19a115uljQ39501zd097%2bdp%2be6L8uN4%2bOLSO3m6/2D7a2N39cdvY2Suubxg7u%2bWXr%2bo/b9qFQo82DOwGDXG31u1uHu67VpaXA1EUmQmBdrFkpDkITu2bXxDnFgT3nHBlSpieETxe4eqsMOsWrs4Il6fIOHONvJ2%2bKnh9dO%2bHAsTR4z/75z97ubzx93%2bU19bL/3nR3d2zd/fZ2H6zBcG6O3v1n17Zu3ud7d3Mi83c2mZh7Y29d2BtbTd%2bemW%2b/tne2u4dHFKrG8GpMzB77RO96Fp%2b9CgS49D7RXgxyosxNgoSMBrj0UaiX49EYhEyGSMoHEE2x4i2nhc/RPwINPD06VN8slYuF1IpNZslFymptJJK59%2beaAhA6Uz%2b5ARjKZtV0mk9n0eSa1eryHxWvdFpGFajYZ3fCI6hTS%2b5%2bnbPdefuvVAoJPJRgeejsVgoEo3GuGAk6g9F/WHwzwnEsAQ6ok2mKEwgP0H/ANGUootYXV11SKdrwXbrZstsWTCCaq3WME1q0ATsCSftdO3u%2bQUliOw6rkM5HgOsqNVu6RXddfPuo0V/4LoURGgJRfm5ABeKCbO%2b6KWF8KX5cDCGtjgpj/IrHd%2bPNufEj7Y4ySREZy0luRNSy3sn%2bZMsajitSC8kUEJjgsiE2mFUMlJgXQ69zHr/7AH0GtPA3uPjY9edO0uhUBCnjo4%2bFo3y%2bBeNYBS4GBBPEQrRc/jwcUz8EPDK7/c/fvwYZ8yKfmQytUQuGxkg9SoUiH5oKcoAfLMOAWvGV9njC21ICzrKEKRw19LSEr4RiYQZhNDb%2bEl3BiL6Y2S3hfl5D57JtQtKVn8wGGSvJsFPtnjYerSm4XOADKBAAHbff/Z/ABcqp4ODg8NPw%2bTbo6Ojly9fbm5uYnL4qwGfwJkNJ%2bC9avzDgvejKz%2b65r%2bQKjzVgMzXLAAAAABJRU5ErkJggg==' /%3e%3c/svg%3e" width="1901" alt="doAction - Form Data" data-srcset="/assets/static/heu-checkin2.82a2fbd.a282637541e4f36d4a8e50f3a438dbec.png 480w, /assets/static/heu-checkin2.cbab2cf.a282637541e4f36d4a8e50f3a438dbec.png 1024w, /assets/static/heu-checkin2.eaff22a.a282637541e4f36d4a8e50f3a438dbec.png 1901w" data-sizes="(max-width: 1901px) 100vw, 1901px" data-src="/assets/static/heu-checkin2.eaff22a.a282637541e4f36d4a8e50f3a438dbec.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/heu-checkin2.eaff22a.a282637541e4f36d4a8e50f3a438dbec.png" width="1901" alt="doAction - Form Data"></noscript><figcaption>doAction - Form Data</figcaption></figure></p>
<h2 id="调试"><a href="#%E8%B0%83%E8%AF%95" aria-hidden="true"><span class="icon icon-link"></span></a>调试</h2>
<p>表单数据有了，开始调试 Python 。</p>
<h3 id="邮件提醒"><a href="#%E9%82%AE%E4%BB%B6%E6%8F%90%E9%86%92" aria-hidden="true"><span class="icon icon-link"></span></a>邮件提醒</h3>
<p>源代码最后的发送邮件部分需要自行引用发送邮件的 <code>.py</code> 文件，但是谷歌找到的好几个 <code>sendmail.py</code> 补上去之后都有奇怪的报错，比如 <code>if</code> 条件右括号报语法错误，我明明是直接复制的啊 QaQ ，看了好几遍也不应该有错啊（后来发觉可能是 Python 版本问题）。最终我索性直接搜 Python SMTP 的用法，找了一段代码补上去。</p>
<p>在 Linux 下试运行的时候发现打卡段没问题，但是后面邮件发送这段报错：</p>
<pre class="language-powershell line-numbers"><code class="language-powershell">Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"checkin.py"</span><span class="token punctuation">,</span> line 151<span class="token punctuation">,</span> in &lt;module>
    smtpObj<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>mail_host<span class="token punctuation">,</span> 25<span class="token punctuation">)</span>    <span class="token comment"># 25 为 SMTP 端口号</span>
  File <span class="token string">"/usr/lib64/python3.6/smtplib.py"</span><span class="token punctuation">,</span> line 336<span class="token punctuation">,</span> in connect
    self<span class="token punctuation">.</span>sock = self<span class="token punctuation">.</span>_get_socket<span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">,</span> self<span class="token punctuation">.</span>timeout<span class="token punctuation">)</span>
  File <span class="token string">"/usr/lib64/python3.6/smtplib.py"</span><span class="token punctuation">,</span> line 307<span class="token punctuation">,</span> in _get_socket
    self<span class="token punctuation">.</span>source_address<span class="token punctuation">)</span>
  File <span class="token string">"/usr/lib64/python3.6/socket.py"</span><span class="token punctuation">,</span> line 724<span class="token punctuation">,</span> in create_connection
    raise err
  File <span class="token string">"/usr/lib64/python3.6/socket.py"</span><span class="token punctuation">,</span> line 713<span class="token punctuation">,</span> in create_connection
    sock<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>sa<span class="token punctuation">)</span>
TimeoutError: <span class="token namespace">[Errno 110]</span> Connection timed out<span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>搜索了一圈发现 Linux 下 SMTP 发信加密程度要求更高，所以得加密发信，将原来的发信替换为 SSL 加密发信：</p>
<pre class="language-python line-numbers"><code class="language-python">smtpObj <span class="token operator">=</span> smtplib<span class="token punctuation">.</span>SMTP_SSL<span class="token punctuation">(</span><span class="token punctuation">)</span> 
smtpObj<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>mail_host<span class="token punctuation">,</span> <span class="token number">465</span><span class="token punctuation">)</span>      <span class="token comment"># 一般加密发信 smtp 端口号为 465</span><span class="line-numbers-rows" aria-hidden="true"><span></span><span></span></span></code></pre>
<p>在 3.7 版本以上的 Python 中需要此脚本时必须使用 <code>smtpObj = smtplib.SMTP_SSL(mail_host)</code> ，否则邮件发信会报错 ValueError 如下：</p>
<pre class="language-powershell line-numbers"><code class="language-powershell">Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"/home/Project/Python/HEUCheckin-2018041015.py"</span><span class="token punctuation">,</span> line 170<span class="token punctuation">,</span> in &lt;module>
    smtpObj<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>mail_host<span class="token punctuation">,</span> 465<span class="token punctuation">)</span>       <span class="token comment"># 加密时 SMTP 端口号为 465</span>
  File <span class="token string">"/usr/local/Python3.8.2/lib/python3.8/smtplib.py"</span><span class="token punctuation">,</span> line 339<span class="token punctuation">,</span> in connect
    self<span class="token punctuation">.</span>sock = self<span class="token punctuation">.</span>_get_socket<span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">,</span> self<span class="token punctuation">.</span>timeout<span class="token punctuation">)</span>
  File <span class="token string">"/usr/local/Python3.8.2/lib/python3.8/smtplib.py"</span><span class="token punctuation">,</span> line 1042<span class="token punctuation">,</span> in _get_socket
    new_socket = self<span class="token punctuation">.</span>context<span class="token punctuation">.</span>wrap_socket<span class="token punctuation">(</span>new_socket<span class="token punctuation">,</span>
  File <span class="token string">"/usr/local/Python3.8.2/lib/python3.8/ssl.py"</span><span class="token punctuation">,</span> line 500<span class="token punctuation">,</span> in wrap_socket
    <span class="token keyword">return</span> self<span class="token punctuation">.</span>sslsocket_class<span class="token punctuation">.</span>_create<span class="token punctuation">(</span>
  File <span class="token string">"/usr/local/Python3.8.2/lib/python3.8/ssl.py"</span><span class="token punctuation">,</span> line 1031<span class="token punctuation">,</span> in _create
    self<span class="token punctuation">.</span>_sslobj = self<span class="token punctuation">.</span>_context<span class="token punctuation">.</span>_wrap_socket<span class="token punctuation">(</span>
ValueError: server_hostname cannot be an empty string or <span class="token function">start</span> with a leading dot<span class="token punctuation">.</span><span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="关闭代理"><a href="#%E5%85%B3%E9%97%AD%E4%BB%A3%E7%90%86" aria-hidden="true"><span class="icon icon-link"></span></a>关闭代理</h3>
<p>本地调试的时候，由于我平时习惯开 Clash 代理挂着，没注意这个，结果就报错了，信息如下：</p>
<details><summary><strong>Python Traceback</strong></summary><br />
<pre class="language-powershell line-numbers"><code class="language-powershell">Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"D:\Python\Python38-64\lib\site-packages\urllib3\connectionpool.py"</span><span class="token punctuation">,</span> line 665<span class="token punctuation">,</span> in urlopen
    httplib_response = self<span class="token punctuation">.</span>_make_request<span class="token punctuation">(</span>
  File <span class="token string">"D:\Python\Python38-64\lib\site-packages\urllib3\connectionpool.py"</span><span class="token punctuation">,</span> line 421<span class="token punctuation">,</span> in _make_request
    six<span class="token punctuation">.</span>raise_from<span class="token punctuation">(</span>e<span class="token punctuation">,</span> None<span class="token punctuation">)</span>
  File <span class="token string">"&lt;string>"</span><span class="token punctuation">,</span> line 3<span class="token punctuation">,</span> in raise_from
  File <span class="token string">"D:\Python\Python38-64\lib\site-packages\urllib3\connectionpool.py"</span><span class="token punctuation">,</span> line 416<span class="token punctuation">,</span> in _make_request
    httplib_response = conn<span class="token punctuation">.</span>getresponse<span class="token punctuation">(</span><span class="token punctuation">)</span>
  File <span class="token string">"D:\Python\Python38-64\lib\http\client.py"</span><span class="token punctuation">,</span> line 1322<span class="token punctuation">,</span> in getresponse
    response<span class="token punctuation">.</span><span class="token keyword">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  File <span class="token string">"D:\Python\Python38-64\lib\http\client.py"</span><span class="token punctuation">,</span> line 303<span class="token punctuation">,</span> in <span class="token keyword">begin</span>
    version<span class="token punctuation">,</span> status<span class="token punctuation">,</span> reason = self<span class="token punctuation">.</span>_read_status<span class="token punctuation">(</span><span class="token punctuation">)</span>
  File <span class="token string">"D:\Python\Python38-64\lib\http\client.py"</span><span class="token punctuation">,</span> line 272<span class="token punctuation">,</span> in _read_status
    raise RemoteDisconnected<span class="token punctuation">(</span><span class="token string">"Remote end closed connection without"</span>
http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>RemoteDisconnected: Remote <span class="token keyword">end</span> closed connection without response

During handling of the above exception<span class="token punctuation">,</span> another exception occurred:

Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"D:\Python\Python38-64\lib\site-packages\requests\adapters.py"</span><span class="token punctuation">,</span> line 439<span class="token punctuation">,</span> in send
    resp = conn<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>
  File <span class="token string">"D:\Python\Python38-64\lib\site-packages\urllib3\connectionpool.py"</span><span class="token punctuation">,</span> line 719<span class="token punctuation">,</span> in urlopen
    retries = retries<span class="token punctuation">.</span>increment<span class="token punctuation">(</span>
  File <span class="token string">"D:\Python\Python38-64\lib\site-packages\urllib3\util\retry.py"</span><span class="token punctuation">,</span> line 436<span class="token punctuation">,</span> in increment
    raise MaxRetryError<span class="token punctuation">(</span>_pool<span class="token punctuation">,</span> url<span class="token punctuation">,</span> error or ResponseError<span class="token punctuation">(</span>cause<span class="token punctuation">)</span><span class="token punctuation">)</span>
urllib3<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span>MaxRetryError: HTTPConnectionPool<span class="token punctuation">(</span>host=<span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> port=7890<span class="token punctuation">)</span>: Max retries exceeded with url: http:<span class="token operator">/</span><span class="token operator">/</span>cas<span class="token punctuation">.</span>hrbeu<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>cas<span class="token operator">/</span>login?service=http<span class="token operator">%</span>3A<span class="token operator">%</span>2F<span class="token operator">%</span>2Fjkgc<span class="token punctuation">.</span>hrbeu<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">%</span>2Finfoplus<span class="token operator">%</span>2Flogin<span class="token operator">%</span>3FretUrl<span class="token operator">%</span>3Dhttp<span class="token operator">%</span>253A<span class="token operator">%</span>252F<span class="token operator">%</span>252Fjkgc<span class="token punctuation">.</span>hrbeu<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">%</span>252Finfoplus<span class="token operator">%</span>252Fform<span class="token operator">%</span>252FJSXNYQSBtest<span class="token operator">%</span>252Fstart<span class="token operator">%</span>253Fticket<span class="token operator">%</span>253DST<span class="token operator">-</span>3779417<span class="token operator">-</span>6SDr7iRPSkJxSd3MFyNd<span class="token operator">-</span>cas01<span class="token punctuation">.</span>example<span class="token punctuation">.</span>org <span class="token punctuation">(</span>Caused by ProxyError<span class="token punctuation">(</span><span class="token string">'Cannot connect to proxy.'</span><span class="token punctuation">,</span> RemoteDisconnected<span class="token punctuation">(</span><span class="token string">'Remote end closed connection without response'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

During handling of the above exception<span class="token punctuation">,</span> another exception occurred:

Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"d:/workshop/PythonProject/CheckIn/checkin.py"</span><span class="token punctuation">,</span> line 61<span class="token punctuation">,</span> in &lt;module>
    response302 = sesh<span class="token punctuation">.</span>post<span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token keyword">data</span>=user_form<span class="token punctuation">,</span> headers=headers<span class="token punctuation">)</span>
  File <span class="token string">"D:\Python\Python38-64\lib\site-packages\requests\sessions.py"</span><span class="token punctuation">,</span> line 578<span class="token punctuation">,</span> in post
    <span class="token keyword">return</span> self<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token keyword">data</span>=<span class="token keyword">data</span><span class="token punctuation">,</span> json=json<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token operator">*</span>kwargs<span class="token punctuation">)</span>
  File <span class="token string">"D:\Python\Python38-64\lib\site-packages\requests\sessions.py"</span><span class="token punctuation">,</span> line 530<span class="token punctuation">,</span> in request
    resp = self<span class="token punctuation">.</span>send<span class="token punctuation">(</span>prep<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token operator">*</span>send_kwargs<span class="token punctuation">)</span>
  File <span class="token string">"D:\Python\Python38-64\lib\site-packages\requests\sessions.py"</span><span class="token punctuation">,</span> line 665<span class="token punctuation">,</span> in send
    history = <span class="token namespace">[resp for resp in gen]</span> <span class="token keyword">if</span> allow_redirects <span class="token keyword">else</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  File <span class="token string">"D:\Python\Python38-64\lib\site-packages\requests\sessions.py"</span><span class="token punctuation">,</span> line 665<span class="token punctuation">,</span> in &lt;listcomp>
    history = <span class="token namespace">[resp for resp in gen]</span> <span class="token keyword">if</span> allow_redirects <span class="token keyword">else</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  File <span class="token string">"D:\Python\Python38-64\lib\site-packages\requests\sessions.py"</span><span class="token punctuation">,</span> line 237<span class="token punctuation">,</span> in resolve_redirects
    resp = self<span class="token punctuation">.</span>send<span class="token punctuation">(</span>
  File <span class="token string">"D:\Python\Python38-64\lib\site-packages\requests\sessions.py"</span><span class="token punctuation">,</span> line 643<span class="token punctuation">,</span> in send
    r = adapter<span class="token punctuation">.</span>send<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token operator">*</span>kwargs<span class="token punctuation">)</span>
  File <span class="token string">"D:\Python\Python38-64\lib\site-packages\requests\adapters.py"</span><span class="token punctuation">,</span> line 510<span class="token punctuation">,</span> in send
    raise ProxyError<span class="token punctuation">(</span>e<span class="token punctuation">,</span> request=request<span class="token punctuation">)</span>
requests<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span>ProxyError: HTTPConnectionPool<span class="token punctuation">(</span>host=<span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> port=7890<span class="token punctuation">)</span>: Max retries exceeded with url: http:<span class="token operator">/</span><span class="token operator">/</span>cas<span class="token punctuation">.</span>hrbeu<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>cas<span class="token operator">/</span>login?service=http<span class="token operator">%</span>3A<span class="token operator">%</span>2F<span class="token operator">%</span>2Fjkgc<span class="token punctuation">.</span>hrbeu<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">%</span>2Finfoplus<span class="token operator">%</span>2Flogin<span class="token operator">%</span>3FretUrl<span class="token operator">%</span>3Dhttp<span class="token operator">%</span>253A<span class="token operator">%</span>252F<span class="token operator">%</span>252Fjkgc<span class="token punctuation">.</span>hrbeu<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">%</span>252Finfoplus<span class="token operator">%</span>252Fform<span class="token operator">%</span>252FJSXNYQSBtest<span class="token operator">%</span>252Fstart<span class="token operator">%</span>253Fticket<span class="token operator">%</span>253DST<span class="token operator">-</span>3779417<span class="token operator">-</span>6SDr7iRPSkJxSd3MFyNd<span class="token operator">-</span>cas01<span class="token punctuation">.</span>example<span class="token punctuation">.</span>org <span class="token punctuation">(</span>Caused by ProxyError<span class="token punctuation">(</span><span class="token string">'Cannot connect to proxy.'</span><span class="token punctuation">,</span> RemoteDisconnected<span class="token punctuation">(</span><span class="token string">'Remote end closed connection without response'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</details><br />
<p>报错一大堆没怎么看懂，<code>ProxyError</code> 看来应该是代理问题，可能和主机的网络设置有关系，没有深究原因，所以解决方案就是 <strong>关掉代理</strong> ！</p>
<blockquote>
<p>尝试了在运行前用 <code>export</code> 或者 <code>set</code> 命令设置 <code>http_proxy</code> <code>https_proxy</code> 代理，也一样无法使用。</p>
</blockquote>
<h3 id="结果判定"><a href="#%E7%BB%93%E6%9E%9C%E5%88%A4%E5%AE%9A" aria-hidden="true"><span class="icon icon-link"></span></a>结果判定</h3>
<p>调试时还发现个问题，原代码打卡出错的判定有缺陷，只报 Python 脚本出 Exception 时的错，而提交表单时可能成功提交，但是返回的不是打卡成功，而是打卡失败。那么如何判断打卡提交正常但是打卡失败呢，这里关注返回的数据 <code>response_end</code> ，用 requests 库转换成 text 后的 <code>response_end.text</code> 缩进一下长这个样子：</p>
<pre class="language-json line-numbers"><code class="language-json"># 成功时
<span class="token punctuation">{</span>
  <span class="token property">"errno"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">"ecode"</span><span class="token operator">:</span><span class="token string">"SUCCEED"</span><span class="token punctuation">,</span>
  <span class="token property">"entities"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token property">"stepId"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"办结"</span><span class="token punctuation">,</span>
    <span class="token property">"code"</span><span class="token operator">:</span><span class="token string">"autoStep1"</span><span class="token punctuation">,</span><span class="token property">"status"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"Auto"</span><span class="token punctuation">,</span><span class="token property">"flowStepId"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"executorSelection"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"timestamp"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"posts"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"users"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"parallel"</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">"hasInstantNotification"</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">"hasCarbonCopy"</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">"entryId"</span><span class="token operator">:</span><span class="token number">2797847</span><span class="token punctuation">,</span><span class="token property">"entryStatus"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"entryRelease"</span><span class="token operator">:</span><span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

# 失败时
<span class="token punctuation">{</span>
  <span class="token property">"errno"</span><span class="token operator">:</span><span class="token number">22001</span><span class="token punctuation">,</span>
  <span class="token property">"ecode"</span><span class="token operator">:</span><span class="token string">"EVENT_CANCELLED"</span><span class="token punctuation">,</span>
  <span class="token property">"error"</span><span class="token operator">:</span><span class="token string">"发生异常\n\njava.lang.reflect.InvocationTargetException\n\tat sun.reflect.GeneratedMethodAccessor457.invoke(Unknown Source)\n\t...\n"</span><span class="token punctuation">,</span>
  <span class="token property">"entities"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以看到返回的字段中 <code>errno</code> 为 <code>0</code> 代表成功提交，剩下的 <code>ecode</code> 显示 <code>str</code> 型的状态，<code>error</code> 只有出现错误时才有，包含了所有的错误信息，这个错误是在学校服务器上报的，不是本地脚本的问题。<code>entities</code> 包含成功提交后的一些数据。那么这就用 <code>errno</code> 来判定远程提交后返回是否成功。先使用 <code>json.loads()</code> 将其转换为 JSON 格式，注意在返回的数据中 <code>errno</code> 字段为 <code>int</code> 类型，<code>entities</code> 字段为 <code>list</code> 类型，发信的 <code>msg</code> 要用 <code>str()</code> 转换这两个数据。</p>
<p>实现代码如下：</p>
<pre class="language-python line-numbers"><code class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment"># ......</span>

    response_end <span class="token operator">=</span> sesh<span class="token punctuation">.</span>post<span class="token punctuation">(</span>submit_url<span class="token punctuation">,</span> data<span class="token operator">=</span>submit_form<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    resJson <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>response_end<span class="token punctuation">.</span>text<span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Form url: '</span><span class="token punctuation">,</span> form_response<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
    <span class="token comment"># print('Form status: ', response_end.text)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Form Status: '</span><span class="token punctuation">,</span> resJson<span class="token punctuation">[</span><span class="token string">'ecode'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Form stJson: '</span><span class="token punctuation">,</span> resJson<span class="token punctuation">)</span>
    <span class="token comment"># 获取表单返回 Json 数据所有 key 用这个</span>
    <span class="token comment"># print('Form stJsonkey: ', resJson.keys())</span>

    <span class="token comment"># 加入远程提交返回结果判断</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>resJson<span class="token punctuation">[</span><span class="token string">'errno'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Form Succeed: '</span><span class="token punctuation">,</span> resJson<span class="token punctuation">[</span><span class="token string">'ecode'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        title <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'打卡成功 &lt;</span><span class="token interpolation"><span class="token punctuation">{</span>submit_form<span class="token punctuation">[</span><span class="token string">"stepId"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">>'</span></span>
        msg <span class="token operator">=</span> <span class="token string">'\t表单地址: '</span> <span class="token operator">+</span> form_response<span class="token punctuation">.</span>url <span class="token operator">+</span> <span class="token string">'\n\n\t表单状态: \n\t\terrno：'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>resJson<span class="token punctuation">[</span><span class="token string">'errno'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n\t\tecode：'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>resJson<span class="token punctuation">[</span><span class="token string">'ecode'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n\t\tentities：'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>resJson<span class="token punctuation">[</span><span class="token string">'entities'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n\n\n\t完整返回：'</span> <span class="token operator">+</span> response_end<span class="token punctuation">.</span>text
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Form Error: '</span><span class="token punctuation">,</span> resJson<span class="token punctuation">[</span><span class="token string">'ecode'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        title <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'打卡失败！校网出错'</span></span>
        msg <span class="token operator">=</span> <span class="token string">'\t表单地址: '</span> <span class="token operator">+</span> form_response<span class="token punctuation">.</span>url <span class="token operator">+</span> <span class="token string">'\n\n\t错误信息: \n\t\terrno：'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>resJson<span class="token punctuation">[</span><span class="token string">'errno'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n\t\tecode：'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>resJson<span class="token punctuation">[</span><span class="token string">'ecode'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n\t\tentities：'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>resJson<span class="token punctuation">[</span><span class="token string">'entities'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n\n\n\t完整返回：'</span> <span class="token operator">+</span> response_end<span class="token punctuation">.</span>text
<span class="token keyword">except</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\n:.:.:.:.: Except return :.:.:.:.:'</span><span class="token punctuation">)</span>
    err <span class="token operator">=</span> traceback<span class="token punctuation">.</span>format_exc<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Python Error: \n'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    title <span class="token operator">=</span> <span class="token string">'打卡失败！脚本出错'</span>
    msg <span class="token operator">=</span> <span class="token string">'\t脚本报错: \n\n\t'</span> <span class="token operator">+</span> err<span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>好啦，现在就差不多完美了，唯一美中不足的就是没有加入 <code>retry</code> 的功能，还不了解这个怎么实现，有空可以试试。</p>
<h2 id="完工"><a href="#%E5%AE%8C%E5%B7%A5" aria-hidden="true"><span class="icon icon-link"></span></a>完工</h2>
<details><summary><strong>修补完整的 auto-checkin.py</strong></summary><br />
<pre class="language-python line-numbers"><code class="language-python"><span class="token comment">#!/usr/bin/env python3</span>
<span class="token comment"># -*- coding: UTF-8 -*-</span>

<span class="token triple-quoted-string string">"""
平安行动自动打卡

Created on 2020-04-13 20:20
@author: ZhangJiawei &amp; Monst.x
"""</span>

<span class="token keyword">import</span> requests
<span class="token keyword">import</span> lxml<span class="token punctuation">.</span>html
<span class="token keyword">import</span> re
<span class="token keyword">import</span> json
<span class="token keyword">import</span> random
<span class="token keyword">import</span> time
<span class="token keyword">import</span> smtplib
<span class="token keyword">import</span> traceback

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"Accept"</span><span class="token punctuation">:</span> <span class="token string">"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"</span><span class="token punctuation">,</span>
    <span class="token string">"Accept-Encoding"</span><span class="token punctuation">:</span> <span class="token string">"gzip, deflate, br"</span><span class="token punctuation">,</span>
    <span class="token string">"Accept-Language"</span><span class="token punctuation">:</span> <span class="token string">"zh-CN"</span><span class="token punctuation">,</span>
    <span class="token string">"Cache-Control"</span><span class="token punctuation">:</span> <span class="token string">"max-age=0"</span><span class="token punctuation">,</span>
    <span class="token string">"Connection"</span><span class="token punctuation">:</span> <span class="token string">"keep-alive"</span><span class="token punctuation">,</span>
    <span class="token string">"Content-Type"</span><span class="token punctuation">:</span> <span class="token string">"application/x-www-form-urlencoded"</span><span class="token punctuation">,</span>
    <span class="token string">"Cookie"</span><span class="token punctuation">:</span> <span class="token string">"MESSAGE_TICKET=%7B%22times%22%3A0%7D; "</span><span class="token punctuation">,</span>
    <span class="token string">"Host"</span><span class="token punctuation">:</span> <span class="token string">"cas.hrbeu.edu.cn"</span><span class="token punctuation">,</span>
    <span class="token string">"Referer"</span><span class="token punctuation">:</span> <span class="token string">"https://cas.hrbeu.edu.cn/cas/login?service=http%3A%2F%2Fjkgc.hrbeu.edu.cn%2Finfoplus%2Flogin%3FretUrl%3Dhttp%253A%252F%252Fjkgc.hrbeu.edu.cn%252Finfoplus%252Fform%252FJSXNYQSBtest%252Fstart"</span><span class="token punctuation">,</span>
    <span class="token string">"Upgrade-Insecure-Requests"</span><span class="token punctuation">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
    <span class="token string">"User-Agent"</span><span class="token punctuation">:</span> <span class="token string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36 Edge/18.18362"</span>
<span class="token punctuation">}</span>

data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"username"</span><span class="token punctuation">:</span><span class="token string">"studentNumber"</span><span class="token punctuation">,</span>                <span class="token comment"># 学号</span>
    <span class="token string">"password"</span><span class="token punctuation">:</span><span class="token string">"password"</span>                      <span class="token comment"># 教务处密码</span>
<span class="token punctuation">}</span>
<span class="token keyword">def</span> <span class="token function">findStr</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> source<span class="token punctuation">.</span>find<span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span>
title <span class="token operator">=</span> <span class="token string">""</span>
msg <span class="token operator">=</span> <span class="token string">""</span>

<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment">#get</span>
    url_login <span class="token operator">=</span> <span class="token string">'https://cas.hrbeu.edu.cn/cas/login?service=http%3A%2F%2Fjkgc.hrbeu.edu.cn%2Finfoplus%2Fform%2FJSXNYQSBtest%2Fstart'</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Begin to login ..."</span><span class="token punctuation">)</span>
    sesh <span class="token operator">=</span> requests<span class="token punctuation">.</span>session<span class="token punctuation">(</span><span class="token punctuation">)</span>
    req <span class="token operator">=</span> sesh<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url_login<span class="token punctuation">)</span>
    html_content <span class="token operator">=</span> req<span class="token punctuation">.</span>text

    <span class="token comment">#post</span>
    login_html <span class="token operator">=</span> lxml<span class="token punctuation">.</span>html<span class="token punctuation">.</span>fromstring<span class="token punctuation">(</span>html_content<span class="token punctuation">)</span>
    hidden_inputs<span class="token operator">=</span>login_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">r'//div[@id="main"]//input[@type="hidden"]'</span><span class="token punctuation">)</span>
    user_form <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">.</span>attrib<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> x<span class="token punctuation">.</span>attrib<span class="token punctuation">[</span><span class="token string">"value"</span><span class="token punctuation">]</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> hidden_inputs<span class="token punctuation">}</span>

    user_form<span class="token punctuation">[</span><span class="token string">"username"</span><span class="token punctuation">]</span><span class="token operator">=</span>data<span class="token punctuation">[</span><span class="token string">'username'</span><span class="token punctuation">]</span>
    user_form<span class="token punctuation">[</span><span class="token string">"password"</span><span class="token punctuation">]</span><span class="token operator">=</span>data<span class="token punctuation">[</span><span class="token string">'password'</span><span class="token punctuation">]</span>
    user_form<span class="token punctuation">[</span><span class="token string">"captcha"</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">''</span>
    user_form<span class="token punctuation">[</span><span class="token string">"submit"</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'登 录'</span>
    headers<span class="token punctuation">[</span><span class="token string">'Cookie'</span><span class="token punctuation">]</span> <span class="token operator">=</span> headers<span class="token punctuation">[</span><span class="token string">'Cookie'</span><span class="token punctuation">]</span> <span class="token operator">+</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Set-cookie'</span><span class="token punctuation">]</span>

    req<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'https://cas.hrbeu.edu.cn/cas/login;jsessionid=</span><span class="token interpolation"><span class="token punctuation">{</span>req<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"JSESSIONID"</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">?service=http%3A%2F%2Fjkgc.hrbeu.edu.cn%2Finfoplus%2Fform%2FJSXNYQSBtest%2Fstart'</span></span>
    response302 <span class="token operator">=</span> sesh<span class="token punctuation">.</span>post<span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> data<span class="token operator">=</span>user_form<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    casRes <span class="token operator">=</span> response302<span class="token punctuation">.</span>history<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"CAS response header"</span><span class="token punctuation">,</span> findStr<span class="token punctuation">(</span>casRes<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Set-Cookie'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'CASTGC'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">#get</span>
    jkgc_response <span class="token operator">=</span> sesh<span class="token punctuation">.</span>get<span class="token punctuation">(</span>response302<span class="token punctuation">.</span>url<span class="token punctuation">)</span>

    <span class="token comment">#post</span>
    headers<span class="token punctuation">[</span><span class="token string">'Accept'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'*/*'</span>
    headers<span class="token punctuation">[</span><span class="token string">'Cookie'</span><span class="token punctuation">]</span> <span class="token operator">=</span> jkgc_response<span class="token punctuation">.</span>request<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Cookie'</span><span class="token punctuation">]</span>
    headers<span class="token punctuation">[</span><span class="token string">'Host'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'jkgc.hrbeu.edu.cn'</span>
    headers<span class="token punctuation">[</span><span class="token string">'Referer'</span><span class="token punctuation">]</span> <span class="token operator">=</span> jkgc_response<span class="token punctuation">.</span>url
    jkgc_html <span class="token operator">=</span> lxml<span class="token punctuation">.</span>html<span class="token punctuation">.</span>fromstring<span class="token punctuation">(</span>jkgc_response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    csrfToken <span class="token operator">=</span> jkgc_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">r'//meta[@itemscope="csrfToken"]'</span><span class="token punctuation">)</span>
    csrfToken <span class="token operator">=</span> csrfToken<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>attrib<span class="token punctuation">[</span><span class="token string">"content"</span><span class="token punctuation">]</span>
    jkgc_form <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'idc'</span><span class="token punctuation">:</span> <span class="token string">'JSXNYQSBtest'</span><span class="token punctuation">,</span>
        <span class="token string">'release'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token string">'csrfToken'</span><span class="token punctuation">:</span> csrfToken<span class="token punctuation">,</span>
        <span class="token string">'formData'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'_VAR_URL'</span><span class="token punctuation">:</span> jkgc_response<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
            <span class="token string">'_VAR_URL_Attr'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
                <span class="token string">'ticket'</span><span class="token punctuation">:</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token string">r'.*ticket=(.*)'</span><span class="token punctuation">,</span> jkgc_response<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    jkgc_form<span class="token punctuation">[</span><span class="token string">'formData'</span><span class="token punctuation">]</span> <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>jkgc_form<span class="token punctuation">[</span><span class="token string">'formData'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    jkgc_url <span class="token operator">=</span> <span class="token string">'http://jkgc.hrbeu.edu.cn/infoplus/interface/start'</span>
    response3 <span class="token operator">=</span> sesh<span class="token punctuation">.</span>post<span class="token punctuation">(</span>jkgc_url<span class="token punctuation">,</span> data<span class="token operator">=</span>jkgc_form<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>

    <span class="token comment">#get</span>
    form_url <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>response3<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'entities'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    form_response <span class="token operator">=</span> sesh<span class="token punctuation">.</span>get<span class="token punctuation">(</span>form_url<span class="token punctuation">)</span>

    <span class="token comment">#post</span>
    headers<span class="token punctuation">[</span><span class="token string">'Accept'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'application/json, text/javascript, */*; q=0.01'</span>
    headers<span class="token punctuation">[</span><span class="token string">'Referer'</span><span class="token punctuation">]</span> <span class="token operator">=</span> form_url
    headers<span class="token punctuation">[</span><span class="token string">'X-Requested-With'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'XMLHttpRequest'</span>
    submit_url <span class="token operator">=</span> <span class="token string">'http://jkgc.hrbeu.edu.cn/infoplus/interface/doAction'</span>

    submit_html <span class="token operator">=</span> lxml<span class="token punctuation">.</span>html<span class="token punctuation">.</span>fromstring<span class="token punctuation">(</span>form_response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    csrfToken2 <span class="token operator">=</span> submit_html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">r'//meta[@itemscope="csrfToken"]'</span><span class="token punctuation">)</span>
    csrfToken2 <span class="token operator">=</span> csrfToken2<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>attrib<span class="token punctuation">[</span><span class="token string">"content"</span><span class="token punctuation">]</span>

    submit_form <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'actionId'</span><span class="token punctuation">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
        <span class="token comment"># boundFields 修改位置</span>
        <span class="token string">'boundFields'</span><span class="token punctuation">:</span> <span class="token string">'fieldCXXXdqszdjtx,fieldCXXXjtgjbc,...'</span><span class="token punctuation">,</span>
        <span class="token string">'csrfToken'</span><span class="token punctuation">:</span> csrfToken2<span class="token punctuation">,</span>
        <span class="token comment"># formData 修改位置</span>
        <span class="token string">'formData'</span><span class="token punctuation">:</span> <span class="token string">r'{"_VAR_EXECUTE_INDEP_ORGANIZE_Name":"学院","_VAR_ACTION_INDEP_ORGANIZES_Codes":"xxxxx",...}'</span><span class="token punctuation">,</span>
        <span class="token string">'lang'</span><span class="token punctuation">:</span> <span class="token string">'zh'</span><span class="token punctuation">,</span>
        <span class="token string">'nextUsers'</span><span class="token punctuation">:</span> <span class="token string">'{}'</span><span class="token punctuation">,</span>
        <span class="token string">'rand'</span><span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">'remark'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token string">'stepId'</span><span class="token punctuation">:</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token string">r'.*form/(\d*?)/'</span><span class="token punctuation">,</span>form_response<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">'timestamp'</span><span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    response_end <span class="token operator">=</span> sesh<span class="token punctuation">.</span>post<span class="token punctuation">(</span>submit_url<span class="token punctuation">,</span> data<span class="token operator">=</span>submit_form<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    resJson <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>response_end<span class="token punctuation">.</span>text<span class="token punctuation">)</span>

    <span class="token comment">## 表单填写完成，返回结果</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Form url: '</span><span class="token punctuation">,</span> form_response<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
    <span class="token comment"># print('Form status: ', response_end.text)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Form Status: '</span><span class="token punctuation">,</span> resJson<span class="token punctuation">[</span><span class="token string">'ecode'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Form stJson: '</span><span class="token punctuation">,</span> resJson<span class="token punctuation">)</span>
    <span class="token comment"># 获取表单返回 Json 数据所有 key 用这个</span>
    <span class="token comment"># print('Form stJsonkey: ', resJson.keys())</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>resJson<span class="token punctuation">[</span><span class="token string">'errno'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Form Succeed: '</span><span class="token punctuation">,</span> resJson<span class="token punctuation">[</span><span class="token string">'ecode'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        title <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'打卡成功 &lt;</span><span class="token interpolation"><span class="token punctuation">{</span>submit_form<span class="token punctuation">[</span><span class="token string">"stepId"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">>'</span></span>
        msg <span class="token operator">=</span> <span class="token string">'\t表单地址: '</span> <span class="token operator">+</span> form_response<span class="token punctuation">.</span>url <span class="token operator">+</span> <span class="token string">'\n\n\t表单状态: \n\t\terrno：'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>resJson<span class="token punctuation">[</span><span class="token string">'errno'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n\t\tecode：'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>resJson<span class="token punctuation">[</span><span class="token string">'ecode'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n\t\tentities：'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>resJson<span class="token punctuation">[</span><span class="token string">'entities'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n\n\n\t完整返回：'</span> <span class="token operator">+</span> response_end<span class="token punctuation">.</span>text
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Form Error: '</span><span class="token punctuation">,</span> resJson<span class="token punctuation">[</span><span class="token string">'ecode'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        title <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'打卡失败！校网出错'</span></span>
        msg <span class="token operator">=</span> <span class="token string">'\t表单地址: '</span> <span class="token operator">+</span> form_response<span class="token punctuation">.</span>url <span class="token operator">+</span> <span class="token string">'\n\n\t错误信息: \n\t\terrno：'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>resJson<span class="token punctuation">[</span><span class="token string">'errno'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n\t\tecode：'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>resJson<span class="token punctuation">[</span><span class="token string">'ecode'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n\t\tentities：'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>resJson<span class="token punctuation">[</span><span class="token string">'entities'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n\n\n\t完整返回：'</span> <span class="token operator">+</span> response_end<span class="token punctuation">.</span>text
<span class="token keyword">except</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\n:.:.:.:.: Except return :.:.:.:.:'</span><span class="token punctuation">)</span>
    err <span class="token operator">=</span> traceback<span class="token punctuation">.</span>format_exc<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Python Error: \n'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    title <span class="token operator">=</span> <span class="token string">'打卡失败！脚本出错'</span>
    msg <span class="token operator">=</span> <span class="token string">'\t脚本报错: \n\n\t'</span> <span class="token operator">+</span> err
<span class="token keyword">finally</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\n:.:.:.:.: Finally :.:.:.:.:'</span><span class="token punctuation">)</span>
    <span class="token comment">## 发送邮件</span>
    <span class="token comment"># import sendmail     ## 这个是普通.py文件，不是Python库</span>
    <span class="token comment"># sendmail.sendmail(title, msg)</span>

    <span class="token keyword">from</span> email<span class="token punctuation">.</span>mime<span class="token punctuation">.</span>text <span class="token keyword">import</span> MIMEText
    <span class="token keyword">from</span> email<span class="token punctuation">.</span>header <span class="token keyword">import</span> Header
 
    <span class="token comment"># 第三方 SMTP 服务</span>
    mail_host<span class="token operator">=</span><span class="token string">"smtp.exmail.qq.com"</span>                 <span class="token comment"># 设置 smtp 服务器</span>
    mail_user<span class="token operator">=</span><span class="token string">"example@example.com"</span>                <span class="token comment"># smtp 发信邮箱用户名</span>
    mail_pass<span class="token operator">=</span><span class="token string">"emailpassword"</span>                      <span class="token comment"># smtp 发信邮箱密码</span>
    sender <span class="token operator">=</span> <span class="token string">'1@example.com'</span>                       <span class="token comment"># 发信邮箱显示</span>
    receivers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'2@example.com'</span><span class="token punctuation">]</span>                  <span class="token comment"># 修改为收件人邮箱，多邮箱以数组形式写</span>
    message <span class="token operator">=</span> MIMEText<span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token string">'plain'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span>
    message<span class="token punctuation">[</span><span class="token string">'From'</span><span class="token punctuation">]</span> <span class="token operator">=</span> Header<span class="token punctuation">(</span><span class="token string">"1@example.com"</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span>        <span class="token comment"># 发件人邮箱</span>
    message<span class="token punctuation">[</span><span class="token string">'To'</span><span class="token punctuation">]</span> <span class="token operator">=</span>  Header<span class="token punctuation">(</span><span class="token string">"2@example.com"</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span>         <span class="token comment"># 收件人邮箱</span>
    subject <span class="token operator">=</span> title
    message<span class="token punctuation">[</span><span class="token string">'Subject'</span><span class="token punctuation">]</span> <span class="token operator">=</span> Header<span class="token punctuation">(</span>subject<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># smtpObj = smtplib.SMTP()              # 使用一般发信</span>
        <span class="token comment"># smtpObj.connect(mail_host, 25)        # 不加密时 SMTP 端口号为 25</span>
        <span class="token comment"># smtpObj = smtplib.SMTP_SSL()          # Python 3.7 以下版本 SSL 加密发信</span>
        smtpObj <span class="token operator">=</span> smtplib<span class="token punctuation">.</span>SMTP_SSL<span class="token punctuation">(</span>mail_host<span class="token punctuation">)</span>   <span class="token comment"># Python 3.7 及以上版本 SSL 加密发信</span>
        smtpObj<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>mail_host<span class="token punctuation">,</span> <span class="token number">465</span><span class="token punctuation">)</span>         <span class="token comment"># 加密时 SMTP 端口号为 465</span>
        smtpObj<span class="token punctuation">.</span>login<span class="token punctuation">(</span>mail_user<span class="token punctuation">,</span>mail_pass<span class="token punctuation">)</span>
        smtpObj<span class="token punctuation">.</span>sendmail<span class="token punctuation">(</span>sender<span class="token punctuation">,</span> receivers<span class="token punctuation">,</span> message<span class="token punctuation">.</span>as_string<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Success: The email was sent successfully"</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> smtplib<span class="token punctuation">.</span>SMTPException<span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Error: Can not send mail"</span><span class="token punctuation">)</span><span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</details><br />
<p>合理地偷个懒，需要修改的地方都在代码注释里了。</p>
<h2 id="定时任务"><a href="#%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1" aria-hidden="true"><span class="icon icon-link"></span></a>定时任务</h2>
<p>要想让代码实现自动打卡，还需要另外设置定时任务，Linux 可以用 <strong>crontab</strong>，Windows 可以用 <strong>任务计划程序</strong>。</p>
<pre class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># Linux 下添加 crontab 定时命令，每天 8:00 执行打卡并输出日志到 .log 文件</span>
<span class="token comment"># 建议先运行测试是否可行</span>
<span class="token comment"># python3 auto-checkin.py</span>

<span class="token function">crontab</span> -e
<span class="token number">0</span> <span class="token number">8</span> * * * root /path/to/python3 /path/to/auto-checkin.py <span class="token operator">></span> /path/to/checkin.log
<span class="token comment"># :wq 保存并退出</span><span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Windows 下按 <code>win</code> 搜索“任务计划程序”调出菜单，然后在右栏选择创建基础任务。跟着创建基本任务向导的指示一步一步来就好了，「触发器 -> 每日」设置时间推荐避开 6:00 腐败街预约打卡的高峰，8:00 就不错。「操作 -> 启动程序」的程序或脚本项按下面格式填写。</p>
<p><figure><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 870 686' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-779ae8e1118617cc54ca7e07fec05044'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-779ae8e1118617cc54ca7e07fec05044)' width='870' height='686' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAyCAIAAABj4UpDAAAACXBIWXMAAAsSAAALEgHS3X78AAAJVElEQVRo3u1Z%2bW8T2R13pf4d/R%2bqrfpLValdtVLbpb9UVaU9tGUFXdgSYHcrLW23QAMsbAjsbrqlkIUcEAhJ7CR2nDjxFdtx4tvja%2bL7Gp/je2Y84yuJ3e/MkEADm4SqglDlo%2bdvXt68mfc%2b73uOLcBxnKhUcvl8gUWxXC6XOBQ5VPcrKA75fF5QLhUUC3P3RseGh4eW9CtWq0WjWdRoFxcXVSarvdPptNvtzv5Dq9VKJBK1Wk1AUdVas1NrtGimtra2Xq/Xq1W62Ww2Go1Waw3239mXgGNdX19nGEZAV1IbuK6IhaulPH%2bl8yqAtwtWA0zOnV36q0E1Ew14YYgol7NZvFQuJRIYdIql8n4nQNN0LJk3mAyxWBSGnIhFMiNVyGdHHjwQTk7JFMqN9v4mwPkyHo1GwaNZ52g2wbDWWq16vcHUau39b0IQknYINe12%2b9UgsLGxwQ%2b1n8KrQeDlbqW941X%2bcPlpW33oPCJQqVTgD0gwegD0OR9Y2xWt1lZnD7OfdT8PXv98H4YhBUGHlWxnbcsunpCPiYEDC9wu%2b8jIgy%2bvXfv6X7empyZVKsXdu3dDkRhEJ2BF7IBKpcwBprEfDsTeQJIkxAwcz0HhYjIa7A4n3Asj2WwW1oUOW9EUS0SFsFvZqKhfXhYKx01m8%2bDgoFgsVioUoskpWAzqIEEqlSoU8pCWE1gin8/BI5KpFNy/6w5IggBdVWmaokiwQ1gYKpS97J7VOUP/44vev3x69sqVyx8c%2b8PxE13nzp873919/tzfpTOSj06f7L5w8dSpk2PCqXmx6Fe/%2bOVnly6//uMfdX1w/Afff%2b3QG4eOHH7v8LuHs7liPpcTmA3Lg4NDkxPj/bcH8HwRtgF62Xl5mmH8qOf%2byL2RERD3Bu8MSGUyjVpttTm25myT20CRxPjY6NS0RCgSoasogtiX9Xqj2ex0Os1mE8BoNGq1ukg0ZvU4J2RzOjtiRd2LZuPA6OiIWDolXxDKZEWayYEGQsGAHUHisVggECyVK%2bzB7sEACrmcd3U1FA4HAgGv1xfH4hiWgMzNl4o0zYAE/cBZMAzoBrRE8RUkb3VQ7XLVJEmyE1hADQbuRzN0bRONep2CG43m5ry8Kluoy1VNuWpNpakvKJh5OSWWkk4XXigIMtnsWquhVMjVWh2GJakqtaspA4FkKpHJZjAsHo5EstkMns1GIuFQMAiWCFSAFVzy%2bXzpTCYYDEGOB2PNsMhuum6rwZaL4KvNeoOLHptg/wE%2bNF1nmAZNZ776Ojwn887LzA8fmsYm7KLJsFIV1S1FRFOl4RG8XBZkWQJNC2jOYoFlYHO7EoCji8Wj4XDY6UBA3Q6Hw%2b1B7Xab2Wxxu12I0%2blxe/x%2bv9vlXFpaslhsTodj1et1uZweFN3gogeHda49C53OOkzrdCAopceFGEUag75BqeTu7JxIr7fE4vFmPZZKFUXTuWJR4PV6dfqVQDhSpWtgQKUKsXOrcGYNugctg97ZwrvOgj8%2bhoEoTPM%2bDYYBFkJzoDjLgk9lL9CvVBWqqlpDq7XlP/05030J77mOX%2bnNg/y8N3O5J9NzLX3m0/Kt2zhBCHwuq1wiRBFLs1ppMSS09RrZaVBPtzYna1XWhgr5XCgUisdjIEEVYCRgMOFwFKwEgmDliai6bW87hyeCpkkMy/fdSK4YUhptXKXOLRsyClVWqS7rlxOy%2bYxCmZyXl/SGnFhCPBjDSyXBhBnr1RWGrMUBI/7Alhu15m7qs1fVmd7F7e26JnNRkTaECq06HY2GxyfGp6ZEQ0ODA4PD6kXV3JxUOCVRKuUWqx1sbO85YRsBIhItDgy73C63YQW1mH0IYtMvozZ7OhJxGk0ukwm12TwIgsjmidFxHEzoN/9EBb93v9YX/eGN2E/64z%2b7g33vYlBwzPOdE6jgj//RvtuFCg67r8nTnSZZJiiwmhqXt3lrgS4J0ZEkd80hO8cHoljMPxRVpmWEZIGckVem5wjxPLTS1CwpWYAOKZkvT8sK94Vl7RJeKgr6lOF3xxJHx2NHJrD3hYljosRRrvN0Oy5KvDOKyTy59TqNxWOLGvXSkt4M7m82Ly5qDIYVjweNxbH/8vg3EwhE2ygkYpJiSwy%2bdth8r20/0a%2bvtwt0LYdnBeFVRDZ5XyuXrtepTpMz9%2bazWxtki2KqBFWlY%2bHQjHhapV70B/1Op2NlZVmj1ax6/eAG5LcQgJqDKzseFSD8dreKka0%2bBEEsk8%2bWqGp9jaq1oBF0g2SaJN0gNhsMFsl6oUywiSyOJeKJJJZMFUpEqcy24o6tzIUhiCr8iz/NJiyaC0h1mvu641uPlqpC7IIpYGwg%2bXAMT6huJj8wRzb9gRtAKKeqBFmFtUiKrjVaVaYOEhpTh7zRpNgFm2C6kAMEEDf4TPm8ut46uV0jDFyC58fj8XQqHY1ELFZrLBYvlkp4NiOVSiFjYBgWCvo1Gg1iRxwOF%2bTpVDIRDoWgSAv6fbe/6dfpdDdv3Xo4Ojp0p//6l32zM5K%2br/r8wUgJfCCdTj/v7p8XwLRRr1397MKp0x%2be677w4emTfzt7bk42399/8%2bKlS1C0dZ04cbWn58wnn5w9233mzJmJ8fHens%2b7uk7euPVNwOf99aE3enp63nz77cNHjr71u9/%2b9PWff/zxR2%2b%2b9Y7JaofDeREE2OhCEN5VFHK2B12FQsPtdoP6ggHInxE/ZBD24%2bPGPaFwJOBbFYslapVSrVlKJuJKlcqwsuJ0o3bEPiuRjI0LdTot1JHhSLRQKL4gAgCGcxT%2bhYmNuSTJ8CG4xmyBvboZlLnUTUNIAGfjwzVI/nUHngPykQ%2b8MAJP%2bskOlfaTE55O5I%2biFlfPwhGwLzQvjMD/HLDtAwIHBA4IAIFU6kADBwQOCBwQOCBwQOCAwAGB/xcClT2Pv2QC3E88j%2bTjEZKsUgS1bZCTVfIx%2bEvwzpnL5V4aAVg3lUqlOXA/HWTgv3wmZY/kZ5CU1pvV%2bnIaL842H77gzrjjhUwqkUgm4S54Fc5k0slkMhKJvBwCcIrRaGQVRW1mq9OBKJWK6WmxVDqXSiaMQXxWrnFYzUsa9cyMRCad8TjsjtXgih9PxKKxWPTe8PDIvRGT2QIH4PP7XxoB9susUNBmtaEoiiCI1WozW6xwxkBAYw%2b6vEGtCWGb0W51%2bQxozBTMJbEY3IXY7frlZY8HBVUEAoF/A7plcjGZ2sWXAAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="870" alt="Windows 定时任务设置" data-srcset="/assets/static/heu-autotask.82a2fbd.22a101484c9f4d4a1d03d2ac7783f0f0.png 480w, /assets/static/heu-autotask.ae085b2.22a101484c9f4d4a1d03d2ac7783f0f0.png 870w" data-sizes="(max-width: 870px) 100vw, 870px" data-src="/assets/static/heu-autotask.ae085b2.22a101484c9f4d4a1d03d2ac7783f0f0.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/heu-autotask.ae085b2.22a101484c9f4d4a1d03d2ac7783f0f0.png" width="870" alt="Windows 定时任务设置"></noscript><figcaption>Windows 定时任务设置</figcaption></figure></p>
<p>Okay，睡个回笼觉庆祝一下 🥳..</p>
</div><div class="post__footer"><div class="post-tags"><a href="/tag/Python/" class="post-tags__link"><span>#</span> Python
  </a><a href="/tag/COVID-19/" class="post-tags__link"><span>#</span> COVID-19
  </a></div></div><div class="post__navigation"><a href="/life/daily-impermanence/" class="navlink" style="float: left;">◀ 手帐 · 常</a><!----></div></div><div class="artalk-cards"><details class="admonition admonition-warning"><summary><div class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></div>
        Comment on Monstx's Blog
      </summary><p>
        评论发表后 UA 信息、IP
        地址会被记录，分别用于评论区展示和垃圾评论拦截。<br>
        无特殊原因评论不会被删除，你应该懂得如何发表适当的言论并对其负责。
      </p></details><div id="LetsArtalk"></div></div><!----><div class="author post-author"><a href="/" class="logo active"><img alt="Author image" src="https://blog.monsterx.cn/assets/static/favicon-180x180.png" class="author__image g-image"></a><!----><p class="author__intro">
    阿巴阿巴，歪比巴布 (づ￣ 3￣)づ
  </p><p class="author__links"><a href="//blog.monsterx.cn/feed.xml" target="_blank" rel="noopener" style="color:#F5A623;"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-rss fa-w-14"><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg></a><a href="/archives" style="color:var(--title-color);"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="archive" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-archive fa-w-16"><path fill="currentColor" d="M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"></path></svg></a><a href="/watch" style="color:#06a878;"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="dragon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="svg-inline--fa fa-dragon fa-w-20"><path fill="currentColor" d="M18.32 255.78L192 223.96l-91.28 68.69c-10.08 10.08-2.94 27.31 11.31 27.31h222.7c-9.44-26.4-14.73-54.47-14.73-83.38v-42.27l-119.73-87.6c-23.82-15.88-55.29-14.01-77.06 4.59L5.81 227.64c-12.38 10.33-3.45 30.42 12.51 28.14zm556.87 34.1l-100.66-50.31A47.992 47.992 0 0 1 448 196.65v-36.69h64l28.09 22.63c6 6 14.14 9.37 22.63 9.37h30.97a32 32 0 0 0 28.62-17.69l14.31-28.62a32.005 32.005 0 0 0-3.02-33.51l-74.53-99.38C553.02 4.7 543.54 0 533.47 0H296.02c-7.13 0-10.7 8.57-5.66 13.61L352 63.96 292.42 88.8c-5.9 2.95-5.9 11.36 0 14.31L352 127.96v108.62c0 72.08 36.03 139.39 96 179.38-195.59 6.81-344.56 41.01-434.1 60.91C5.78 478.67 0 485.88 0 494.2 0 504 7.95 512 17.76 512h499.08c63.29.01 119.61-47.56 122.99-110.76 2.52-47.28-22.73-90.4-64.64-111.36zM489.18 66.25l45.65 11.41c-2.75 10.91-12.47 18.89-24.13 18.26-12.96-.71-25.85-12.53-21.52-29.67z"></path></svg></a><a href="/friends" style="color:#ff0000;"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="heart" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-heart fa-w-16"><path fill="currentColor" d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"></path></svg></a><a href="/about"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="id-badge" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="svg-inline--fa fa-id-badge fa-w-12"><path fill="currentColor" d="M336 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM144 32h96c8.8 0 16 7.2 16 16s-7.2 16-16 16h-96c-8.8 0-16-7.2-16-16s7.2-16 16-16zm48 128c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zm112 236.8c0 10.6-10 19.2-22.4 19.2H102.4C90 416 80 407.4 80 396.8v-19.2c0-31.8 30.1-57.6 67.2-57.6h5c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h5c37.1 0 67.2 25.8 67.2 57.6v19.2z"></path></svg></a></p></div></div></main><footer class="footer"><div class="footer__copyright"><a href="http://www.beian.miit.gov.cn/" target="_blank" style="text-decoration: none; cursor: default;">皖 ICP 备 18021272 号 - 1</a>
      © 2014 - 2020
    </div><div class="footer__links"><a href="https://gridsome.org" target="_blank">Gridsome</a> ×
      <a href="https://github.com/spencerwooo" target="_blank">SpencerWoo</a>
      ×
      <a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=ztik1iwq&utm_source=ztik1iwq" target="_blank">Aliyun</a>
      ×
      <a href="https://www.dogedoge.com" target="_blank">DogeDoge</a></div><div class="footer__links"><a href="//github.com/monsterxcn" target="_blank" style="color: var(--title-color);font-size: 1.3em;margin: 0 .5em;"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="svg-inline--fa fa-github fa-w-16"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a href="//t.me/monsterxcn" target="_blank" style="color: #179CDE;font-size: 1.3em;margin: 0 .5em;"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="telegram" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="svg-inline--fa fa-telegram fa-w-16"><path fill="currentColor" d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"></path></svg></a><a href="//twitter.com/mo_curio" target="_blank" style="color: #1da1f2;font-size: 1.3em;margin: 0 .5em;"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-twitter fa-w-16"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a href="//weibo.com/u/3978619198" target="_blank" style="color: #E6162D;font-size: 1.3em;margin: 0 .5em;"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="weibo" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-weibo fa-w-16"><path fill="currentColor" d="M407 177.6c7.6-24-13.4-46.8-37.4-41.7-22 4.8-28.8-28.1-7.1-32.8 50.1-10.9 92.3 37.1 76.5 84.8-6.8 21.2-38.8 10.8-32-10.3zM214.8 446.7C108.5 446.7 0 395.3 0 310.4c0-44.3 28-95.4 76.3-143.7C176 67 279.5 65.8 249.9 161c-4 13.1 12.3 5.7 12.3 6 79.5-33.6 140.5-16.8 114 51.4-3.7 9.4 1.1 10.9 8.3 13.1 135.7 42.3 34.8 215.2-169.7 215.2zm143.7-146.3c-5.4-55.7-78.5-94-163.4-85.7-84.8 8.6-148.8 60.3-143.4 116s78.5 94 163.4 85.7c84.8-8.6 148.8-60.3 143.4-116zM347.9 35.1c-25.9 5.6-16.8 43.7 8.3 38.3 72.3-15.2 134.8 52.8 111.7 124-7.4 24.2 29.1 37 37.4 12 31.9-99.8-55.1-195.9-157.4-174.3zm-78.5 311c-17.1 38.8-66.8 60-109.1 46.3-40.8-13.1-58-53.4-40.3-89.7 17.7-35.4 63.1-55.4 103.4-45.1 42 10.8 63.1 50.2 46 88.5zm-86.3-30c-12.9-5.4-30 .3-38 12.9-8.3 12.9-4.3 28 8.6 34 13.1 6 30.8.3 39.1-12.9 8-13.1 3.7-28.3-9.7-34zm32.6-13.4c-5.1-1.7-11.4.6-14.3 5.4-2.9 5.1-1.4 10.6 3.7 12.9 5.1 2 11.7-.3 14.6-5.4 2.8-5.2 1.1-10.9-4-12.9z"></path></svg></a><a href="//steamcommunity.com/id/monsterxcn" target="_blank" style="color: var(--social-steam-color);font-size: 1.3em;margin: 0 .5em;"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="steam" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="svg-inline--fa fa-steam fa-w-16"><path fill="currentColor" d="M496 256c0 137-111.2 248-248.4 248-113.8 0-209.6-76.3-239-180.4l95.2 39.3c6.4 32.1 34.9 56.4 68.9 56.4 39.2 0 71.9-32.4 70.2-73.5l84.5-60.2c52.1 1.3 95.8-40.9 95.8-93.5 0-51.6-42-93.5-93.7-93.5s-93.7 42-93.7 93.5v1.2L176.6 279c-15.5-.9-30.7 3.4-43.5 12.1L0 236.1C10.2 108.4 117.1 8 247.6 8 384.8 8 496 119 496 256zM155.7 384.3l-30.5-12.6a52.79 52.79 0 0 0 27.2 25.8c26.9 11.2 57.8-1.6 69-28.4 5.4-13 5.5-27.3.1-40.3-5.4-13-15.5-23.2-28.5-28.6-12.9-5.4-26.7-5.2-38.9-.6l31.5 13c19.8 8.2 29.2 30.9 20.9 50.7-8.3 19.9-31 29.2-50.8 21zm173.8-129.9c-34.4 0-62.4-28-62.4-62.3s28-62.3 62.4-62.3 62.4 28 62.4 62.3-27.9 62.3-62.4 62.3zm.1-15.6c25.9 0 46.9-21 46.9-46.8 0-25.9-21-46.8-46.9-46.8s-46.9 21-46.9 46.8c.1 25.8 21.1 46.8 46.9 46.8z"></path></svg></a></div></footer></div> <script src="/assets/js/app.c7c471b6.js" defer></script><script src="/assets/js/page--src--templates--blog-post-vue.eca4166c.js" defer></script>
  </body>
</html>
